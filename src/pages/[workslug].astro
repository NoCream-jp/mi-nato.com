---
import { getCollection, type CollectionEntry } from "astro:content";
import InternalLinkButton from "../components/InternalLinkButton.astro";

export async function getStaticPaths() {
  const works = await getCollection("work");
  return works.map((entry) => ({
    params: { workslug: entry.slug },
    props: { entry },
  }));
}

interface Props {
  entry: CollectionEntry<"work">;
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{entry.data.title} | mi-nato.com</title>
    <link rel="icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/styles/index.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Gothic+A1&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header">
      <div class="header-left">
        <a href="/">mi-nato.com</a>
      </div>
      <div class="header-right">
        <a href="/">Home</a>
        <a href="/#about">About</a>
        <a href="/#works">Works</a>
        <a href="/#studies">Studies</a>
      </div>
    </header>

    <div class="article-page-container">
      <div class="article-page-left-container">
        <article class="article-content">
          <h1 class="article-title">{entry.data.title}</h1>
          <div class="article-meta">
            <span class="article-date"
              >{entry.data.date.toLocaleDateString("ja-JP")}</span
            >
          </div>
          <img
            src={entry.data.thumbnail}
            alt={entry.data.title}
            class="article-thumbnail"
          />
          <div class="article-body">
            <Content />
          </div>
        </article>
      </div>
    </div>

    <div
      class="section-footer"
      style="margin-top: 50px; display: flex; justify-content: center;"
    >
      <InternalLinkButton href="/#works" description="Back to Works" />
    </div>

    <a href="#" class="back-to-top-button">
      <i class="fa-solid fa-angle-up"></i>
    </a>
  </body>
</html>

<style>
  .header {
    margin-bottom: 0;
  }
  .article-page-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
    gap: auto;
    max-width: 1500px;
    margin: 10px auto;
  }
  .article-content {
    background-color: rgba(255, 255, 255, 0.9);
    padding: 40px;
    border-radius: 20px;
    max-width: 800px;
    margin: 0 auto;
    color: #333;
  }
  .article-title {
    font-size: 2rem;
    margin-bottom: 20px;
    color: #333;
  }
  .article-meta {
    display: flex;
    gap: 20px;
    color: #666;
    margin-bottom: 20px;
  }
  .article-thumbnail {
    width: 100%;
    height: auto;
    max-height: 400px;
    object-fit: cover;
    border-radius: 10px;
    margin-bottom: 30px;
  }
  .article-body {
    line-height: 1.8;
    font-size: 1.1rem;
  }
  @media (max-width: 510px) {
    .article-body {
      font-size: 0.8rem;
    }
  }
</style>
